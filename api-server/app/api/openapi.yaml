openapi: 3.0.0
info:
  title: Community Model API
  description: API for accessing data generated by the Community Model and for updating
    user data used by the Community Model for finding communities
  contact:
    email: gjimenez@ucm.es
  license:
    name: Apache 2.0
    url: http://www.apache.org/licenses/LICENSE-2.0.html
  version: v.1.1
servers:
- url: /v1.1/
tags:
- name: data input
  description: Inspice data input
- name: perspectives
  description: Operations about computing perspectives among communities(?)
- name: jobs monitor
  description: Monitor the status of a job
paths:
  /dataInput:
    post:
      tags:
      - data input
      summary: data input
      description: data input
      operationId: postInputData
      requestBody:
        description: user_interactions
        content:
          application/json:
            schema:
              type: array
              items:
                $ref: './openapi_specs/user_interactions.yaml#/user_interactions'
              x-content-type: application/json
        required: true
      responses:
        "200":
          description: successful operation
          content:
            application/json:
              schema:
                $ref: './openapi_specs/schemas.yaml#/id'
        "400":
          description: Error
      x-swagger-router-controller: DataInput
  /seed:
    get:
      tags:
      - data input
      summary: Get seed
      description: Returns seed config gile
      operationId: getSeed
      responses:
        "200":
          description: successful operation
          content:
            application/json:
              schema:
                $ref: './openapi_specs/schemas.yaml#/id'
        "400":
          description: invalid seed id
      x-swagger-router-controller: DataInput
  /jobs/{jobId}:
    get:
      tags:
      - jobs monitor
      summary: Job status
      description: Monitor the status of a job. Shows if the status of the job is finished or in progress, and returns data if it is finished.
      operationId: none
      parameters:
      - name: jobId
        in: path
        description: ID of the job to monitor
        required: true
        style: simple
        explode: false
        schema:
          $ref: './openapi_specs/jobs.yaml#/jobId'
      responses:
        "200":
          description: Job status
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: './openapi_specs/jobs.yaml#/jobStarted'
                  - $ref: './openapi_specs/jobs.yaml#/jobCompleted'
        "400":
          description: Job does not exist
      x-content-type: application/json
  /perspectives:
    get:
      tags:
      - perspectives
      summary: Get all perspectives in the model
      description: Access to a list of the perspectives in the community model
      operationId: getPerspectives
      responses:
        "200":
          description: A list with the perspectives in the model
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: './openapi_specs/perspective.yaml#/perspective'
                x-content-type: application/json
        "400":
          description: Community model does not exist
      x-swagger-router-controller: Perspectives
  /perspectives/{perspectiveId}:
    get:
      tags:
      - perspectives
      summary: Get one perspective  
      description: Returns information about a perspective
      operationId: getPerspectiveById
      parameters:
      - name: perspectiveId
        in: path
        description: ID of perspective to return
        required: true
        style: simple
        explode: false
        schema:
          $ref: './openapi_specs/schemas.yaml#/id'
      responses:
        "200":
          description: successful operation
          content:
            application/json:
              schema:
                $ref: './openapi_specs/perspective.yaml#/perspective'
        "400":
          description: invalid perspective id
      x-swagger-router-controller: Perspectives
  /perspectives/{perspectiveId}/communities:
    get:
      tags:
      - perspectives
      summary: Communities with the same perspective
      description: Returns a list with the communities 
      operationId: listPerspectiveCommunities
      parameters:
      - name: perspectiveId
        in: path
        description: ID of the perspective to return
        required: true
        style: simple
        explode: false
        schema:
          $ref: './openapi_specs/jobs.yaml#/job'
      responses:
        "200":
          description: successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: './openapi_specs/community.yaml#/community'
                x-content-type: application/json
        "400":
          description: invalid community id
      x-swagger-router-controller: Perspectives
  /perspective:
    post:
      tags:
      - perspectives
      summary: Add perspective
      description: Add perspective <description>
      operationId: PostPerspective
      requestBody:
        description: Perspective
        content:
            application/json:
              schema:
                $ref: './openapi_specs/perspective.yaml#/perspective'
        required: true
      responses:
        "204":
          description: Added
        "400":
          description: error
      x-swagger-router-controller: Perspectives
components:
  schemas:
    $ref: "./openapi_specs/schemas.yaml"